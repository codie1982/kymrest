/*   * To change this license header, choose License Headers in Project Properties.  * To change this template file, choose Tools | Templates  * and open the template in the editor.  */var product_form = function () {    var handleSummernote = function () {        $('#summernote').summernote(                {                    toolbar: [                        ['style', ['bold', 'italic', 'underline', 'clear']],                        ['font', ['strikethrough', 'superscript', 'subscript']],                        ['fontsize', ['fontsize']],                        ['color', ['color']],                        ['para', ['ul', 'ol', 'paragraph']],                        ['height', ['height']]                    ],                    height: 200,                    onfocus: function (e) {                        $('body').addClass('overlay-disabled');                    },                    onblur: function (e) {                        $('body').removeClass('overlay-disabled');                    }                });    }    var prouct_price_type = function () {        $(".product_price_type").on("change", function (e) {            e.preventDefault();            var check_value = $(this).val();            if (check_value == "flat") {                $('[data-product_options_fields="add_fields"]').prop("disabled", true)                $('[data-product_options_group="add_group"]').prop("disabled", true)                $('[data-product="price_type_section"]').hide()            } else {                $('[data-product_options_fields="add_fields"]').prop("disabled", false)                $('[data-product_options_group="add_group"]').prop("disabled", false)                $('[data-product="price_type_section"]').show()            }        })    }    var product_delivery_custom_time = function () {        $(".product_delivey_time").on("change", function (e) {            var selected_value = $(this).children("option:selected").val()            if (selected_value == "custom") {                $(".delivery_custom_time").show()            } else {                $(".delivery_custom_time").hide()            }        })    }    var tags = function () {        $('[data-role="tagsinput"]').tagsinput()    }    var add_group = () => {        $('[data-product_options_group="add_group"]').off();        $('[data-product_options_group="add_group"]').on("click", function (e) {            e.preventDefault()            let grouprand = Math.round(Math.random() * 10000);            $(".price_group").append(`<li class="price_group_list">                <a href="javascript:void(0)">                    <input type="hidden" data-secret_key="${grouprand}" name="@product_price_group_fields$secret_number:${grouprand}" value="${grouprand}"/>                    <div class="form-group">                        <div class="row">                            <label class="col-sm-3 control-label">Fiyat Grupları</label>                            <div class="col-sm-4"><input type="text" class="form-control" placeholder="Grup Başlık" name="@product_price_group_fields$group_title:${grouprand}"/></div>                            <div class="col-sm-2"><select name="@product_price_group_fields$group_type:${grouprand}" class="form-control" id=""><option value="---">Gruplama Şekli</option><option value="radio">Tek Seçim</option><option value="checkbox">Çoklu Seçim</option></select></div>                            <div class="col-sm-1"><button class="btn btn-info" title="Grup Nesnesi Ekle" data-product_options_group="add_group_item" ><span class="fa fa-plus-square"></span></button></div>                            <div class="col-sm-1"><button class="btn btn-danger" title="Grubu Kaldır" data-product_options_group="remove_group"><span class="fa fa-trash"></span></button></div>                            <ul class="price_group_list_item"></ul>                        </div>                    </div>                </a>            </li>`)            $('[data-product_options_group="remove_group"]').on("click", function (e) {                e.preventDefault();                $(this).parents(".price_group_list").fadeOut(500, function () {                    $(this).remove()                })            })            $('[data-product_options_group="add_group_item"]').off()            $('[data-product_options_group="add_group_item"]').on("click", function (e) {                e.preventDefault()                let itemrand = Math.round(Math.random() * 10000);                //let groupid = $(this).data("key")                let parent_key_text;                let parent_key = $(this).parents(".price_group_list").find('[data-secret_key]').data("secret_key")                parent_key_text = `<input type="hidden" name="@product_price_option_fields$parent_key:${itemrand}" value="${parent_key}"/>`;                $(this).parents(".price_group_list").find(".price_group_list_item").append(`                                <li class="price_group_list_item_li">                                ${parent_key_text}                                <input type="hidden" name="@product_price_option_fields$secret_number:${itemrand}" value="${itemrand}"/>                                    <div class="row">                                        <div class="col-sm-2"><input type="text" class="form-control" placeholder="Başlık" name="@product_price_option_fields$product_price_title:${itemrand}"/></div>                                        <div class="col-sm-2"><select name="@product_price_option_fields$direction:${itemrand}" class="form-control" id=""><option value="increase">Arttırım</option><option value="decrease">Azaltım</option></select></div>                                        <div class="col-sm-2"><select name="@product_price_option_fields$type:${itemrand}" class="form-control" id=""><option value="minus">Miktar</option><option value="rate">Oran</option></select></div>                                        <div class="col-sm-2"><input type="text" class="form-control" placeholder="Değer" value="0" name="@product_price_option_fields$value:${itemrand}"/></div>                                        <div class="col-sm-2"><select name="@product_price_option_fields$default_selection:${itemrand}" class="form-control" id=""><option value="">Seçili</option><option value="">Seçili Değil</option></select></div>                                        <div class="col-sm-1"><button class="btn btn-danger" data-product_options_group="remove_group_item" title="Alanı Kaldır"><span class="fa fa-trash"></span></button></div>                                    </div>                                </li>`)                $('[data-product_options_group="remove_group_item"]').off()                $('[data-product_options_group="remove_group_item"]').on("click", function (e) {                    e.preventDefault();                    var $this = $(this)                    if (typeof $this.data("key") != "undefined") {                        var key = $this.data("key")                        var options = {                            component_name: "product_form",                            action: "remove_group_item",                            data: {"key": key},                            complete: function (data) {                                if (data.sonuc) {                                    $(this).parents(".price_group_list_item_li").fadeOut(500, function () {                                        $(this).remove()                                    })                                } else {                                    alert("Group Silinemedi")                                }                            }                        }                        console.log(options)                        makexhr.send(options)                    } else {                        $(this).parents(".price_group_list_item_li").fadeOut(500, function () {                            $(this).remove()                        })                    }                })                $("ul.price_group_list_item").sortable({                    opacity: 0.5,                    delay: 250,                    start: function (event, ui) {                    },                    stop: function (event, ui) {                        $("#event_list").html("Sonlandı")                    },                    sort: function (event, ui) {                        $("#event_list").html("Sıralandı")                    },                    activate: function (event, ui) {                        $("#event_list").html("activate")                    },                    update: function (event, ui) {                        count = 1;                        $("ul.sortable_price_options li").each(function () {                            $(this).find('input.options_line').val(count);                            count++;                        })                    }                });            })            var count = 1;            $("ul.price_group").sortable({                opacity: 0.5,                delay: 250,                start: function (event, ui) {                },                stop: function (event, ui) {                    $("#event_list").html("Sonlandı")                },                sort: function (event, ui) {                    $("#event_list").html("Sıralandı")                },                activate: function (event, ui) {                    $("#event_list").html("activate")                },                update: function (event, ui) {                    count = 1;                    $("ul.sortable_price_options li").each(function () {                        $(this).find('input.options_line').val(count);                        count++;                    })                }            });        })    }    var remove_group = () => {        $('[data-product_options_group="remove_group"]').off();        $('[data-product_options_group="remove_group"]').on("click", function (e) {            e.preventDefault();            //data-key="182"            var $this = $(this)            if (typeof $this.data("key") != "undefined") {                var key = $this.data("key")                var options = {                    component_name: "product_form",                    action: "remove_group",                    data: {"key": key},                    complete: function (data) {                        if (data.sonuc) {                            $this.parents(".price_group_list").fadeOut(500, function () {                                $(this).remove()                            })                        } else {                            alert("Group Silinemedi")                        }                    }                }                makexhr.send(options)            } else {                $(this).parents(".price_group_list").fadeOut(500, function () {                    $(this).remove()                })            }        })    }    var remove_group_item = () => {        $('[data-product_options_group="remove_group_item"]').off()        $('[data-product_options_group="remove_group_item"]').on("click", function (e) {            e.preventDefault();            var $this = $(this)            if (typeof $this.data("key") != "undefined") {                var key = $this.data("key")                var options = {                    component_name: "product_form",                    action: "remove_group_item",                    data: {"key": key},                    complete: function (data) {                        if (data.sonuc) {                            $this.parents(".price_group_list_item_li").fadeOut(500, function () {                                $(this).remove()                            })                        } else {                            alert("Group Item Silinemedi")                        }                    }                }                makexhr.send(options)            } else {                $(this).parents(".price_group_list_item_li").fadeOut(500, function () {                    $(this).remove()                })            }        })    }    return {        init: function () {            tags();            handleSummernote();            prouct_price_type();            product_delivery_custom_time();            add_group();            // add_group_event();            remove_group();            remove_group_item();        }    }}();jQuery(document).ready(function () {    product_form.init(); // init metronic core componets});