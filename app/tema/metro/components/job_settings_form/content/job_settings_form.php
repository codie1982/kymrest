<?php component::start($props); ?><?php $job_settings = component::get_props("job_settings"); ?><div class="row">    <div class="col-md-offset-2 col-md-8">        <!-- BEGIN SAMPLE FORM PORTLET-->        <div class="portlet light bordered">            <div class="portlet-title">                <div class="caption">                    <i class="icon-settings font-dark"></i>                    <span class="caption-subject font-dark sbold uppercase">Sipariş Ayarları</span>                    <span class="help-inline"> Sipariş Ayarları Siparişlerinizi işinize göre en optimize bir şekilde oluşrturmanızı sağlar. </span>                </div>            </div>            <div class="portlet-body form">                <form class="form-horizontal" data-send="xhr" method="post" data-component_name="job_settings_form" data-action="update_job_settings">                    <div class="job_setings_form_content">                        <?php                        //dnd($job_settings);                        //$job_settings Değişkenin durumuna göre doldur boşalt                        $col = [];                        $row = [];                        $template = [];                        if (!empty($job_settings)) {                            $prk = $job_settings->primary_key;                            $col[] = [                                "content" => [                                    "type" => "primary_key",                                    "control_class" => "settings_job_fields",                                    "primary_id" => $job_settings->$prk,                                ]                            ];                        }                        $col[] = [                            "col" => ["3"],                            "content" => ["type" => "label", "text" => "Siparişlerin Tamamlanma Süresi", "attributes" => ["class" => "form-label"]]                        ];                        $hr = [];                        for ($i = 1; $i < 32; $i++)                            $hr[] = ["text" => fixPre($i), "attributes" => ["value" => $i, "!" => $job_settings->complete_time == $i ? "selected" : null]];                        $col[] = [                            "col" => ["2"],                            "content" => [                                "type" => "select",                                "control_class" => "settings_job_fields",                                "action" => "complete_time",                                "datatype" => "complete_time",                                "options" => $hr,                                "attributes" => [                                    "class" => "form-control",                                ]                            ]                        ];                        $col[] = [                            "col" => ["3"],                            "content" => ["type" => "label", "text" => "süreler gün olarak değerlendirilir", "attributes" => ["class" => "form-label"]]                        ];                        $row[] = $col;                        $col = [];                        /*                         * ********************************************************************************* */                        $hr = [];                        for ($i = 1; $i < 32; $i++)                            $hr[] = ["text" => fixPre($i), "attributes" => ["value" => $i, "!" => $job_settings->card_time == $i ? "selected" : null]];                        $col[] = [                            "col" => ["3"],                            "content" => ["type" => "label", "text" => "Siparişlerin Bekleme Süresi", "attributes" => ["class" => "form-label"]]                        ];                        $col[] = [                            "col" => ["2"],                            "content" => [                                "type" => "select",                                "control_class" => "settings_job_fields",                                "action" => "card_time",                                "datatype" => "card_time",                                "options" => $hr,                                "attributes" => [                                    "class" => "form-control",                                ]                            ]                        ];                        $col[] = [                            "col" => ["3"],                            "content" => ["type" => "label", "text" => "süreler gün olarak değerlendirilir", "attributes" => ["class" => "form-label"]]                        ];                        $row[] = $col;                        $col = [];                        /*                         * ********************************************************************************* */                        $col[] = [                            "col" => ["3"],                            "content" => ["type" => "label", "text" => "Saat Kırılımı Oluştur", "attributes" => ["class" => "form-label"]]                        ];                        $col[] = [                            "col" => ["2"],                            "content" =>                            [                                "type" => "checkbox",                                "control_class" => "settings_job_fields",                                "action" => "time_threshold",                                "check" => [                                    "text" => "Saat Kırılımı Kullan",                                    "attributes" => [                                        "class" => "md-check",                                        "value" => "1",                                        "data-type" => "time_threshold",                                        "!" => $job_settings->time_threshold == 1 ? "checked" : null,                                    ],                                ],                                "attributes" => [                                    "class" => "mt-checkbox-list",                                ],                            ]                        ];                        $hr = [];                        for ($i = 0; $i < 24; $i++)                            $hr[] = ["text" => fixPre($i), "attributes" => ["value" => $i, "!" => $job_settings->time_threshold_hour == $i ? "selected" : null]];                        $col[] = [                            "col" => ["1"],                            "content" => [                                "type" => "select",                                "control_class" => "settings_job_fields",                                "action" => "time_threshold_hour",                                "contidion" => "time_threshold",                                "contidion_value" => "1",                                "datatype" => "time_threshold",                                "options" => $hr,                                "attributes" => [                                    "class" => "form-control",                                ]                            ]                        ];                        $mn = [];                        for ($i = 0; $i < 60; $i++)                            $mn[] = ["text" => fixPre($i), "attributes" => ["value" => $i, "!" => $job_settings->time_threshold_minute == $i ? "selected" : null]];                        $col[] = [                            "col" => ["1"],                            "content" => [                                "type" => "select",                                "control_class" => "settings_job_fields",                                "action" => "time_threshold_hour",                                "contidion" => "time_threshold",                                "contidion_value" => "1",                                "datatype" => "direction",                                "options" => $mn,                                "attributes" => [                                    "class" => "form-control",                                ]                            ]                        ];                        $row[] = $col;                        $col = [];                        /*                         * ********************************************************************************* */                        $col[] = [                            "col" => ["3"],                            "content" => ["type" => "label", "text" => "Sipariş Sayısını Sınırla", "attributes" => ["class" => "form-label"]]                        ];                        $col[] = [                            "col" => ["2"],                            "content" =>                            [                                "type" => "checkbox",                                "control_class" => "settings_job_fields",                                "action" => "user_job_limit",                                "check" => [                                    "text" => "Sipariş Sınırı",                                    "attributes" => [                                        "class" => "md-check",                                        "value" => "1",                                        "data-type" => "user_job_limit",                                        "!" => $job_settings->user_job_limit == 1 ? "checked" : null,                                    ],                                ],                                "attributes" => [                                    "class" => "mt-checkbox-list",                                ],                            ]                        ];                        $col[] = [                            "col" => ["1"],                            "content" =>                            [                                "type" => "input",                                "control_class" => "settings_job_fields",                                "action" => "max_job_count",                                "contidion" => "user_job_limit",                                "contidion_value" => "1",                                "attributes" => [                                    "class" => "form-control",                                    "type" => "text",                                    "data-component_name" => "job_settings_form",                                    "value" => $job_settings->max_job_count ? $job_settings->max_job_count : 0,                                    "placeholder" => "max Sipariş sayısını giriniz",                                    "data-type" => "user_job_limit",                                ],                            ]                        ];                        $col[] = [                            "col" => ["3"],                            "content" => ["type" => "label", "text" => "00:00'dan itibaren gün içinde oluşacak max. sipariş sayısı"]                        ];                        $row[] = $col;                        $col = [];                        /*                         * ********************************************************************************* */                        $col[] = [                            "col" => ["3"],                            "content" => ["type" => "label", "text" => "Sipariş Saat Aralığı (Başlangıç / Bitiş)", "attributes" => ["class" => "form-label"]]                        ];                        $col[] = [                            "col" => ["2"],                            "content" =>                            [                                "type" => "checkbox",                                "control_class" => "settings_job_fields",                                "action" => "job_time_limit",                                "check" => [                                    "text" => "Sipariş Saat Aralığı",                                    "attributes" => [                                        "class" => "md-check",                                        "value" => "1",                                        "data-type" => "job_time_limit",                                        "!" => $job_settings->job_time_limit == 1 ? "checked" : null,                                    ],                                ],                                "attributes" => [                                    "class" => "mt-checkbox-list",                                ],                            ]                        ];                        //İlk Sipariş Saati                        $hr = [];                        for ($i = 0; $i < 24; $i++)                            $hr[] = ["text" => fixPre($i), "attributes" => ["value" => $i, "!" => $job_settings->user_first_job_hour == $i ? "selected" : null]];                        $col[] = [                            "col" => ["1"],                            "content" => [                                "type" => "select",                                "control_class" => "settings_job_fields",                                "action" => "user_first_job_hour",                                "contidion" => "job_time_limit",                                "contidion_value" => "1",                                "datatype" => "direction",                                "options" => $hr,                                "attributes" => [                                    "class" => "form-control",                                ]                            ]                        ];                        $mn = [];                        for ($i = 0; $i < 60; $i++)                            $mn[] = ["text" => fixPre($i), "attributes" => ["value" => $i, "!" => $job_settings->user_first_job_minute == $i ? "selected" : null]];                        $col[] = [                            "col" => ["1"],                            "content" => [                                "type" => "select",                                "control_class" => "settings_job_fields",                                "action" => "user_first_job_minute",                                "contidion" => "job_time_limit",                                "contidion_value" => "1",                                "datatype" => "direction",                                "options" => $mn,                                "attributes" => [                                    "class" => "form-control",                                ]                            ]                        ];                        //Son Sipariş Saati                        $hr = [];                        for ($i = 0; $i < 24; $i++)                            $hr[] = ["text" => fixPre($i), "attributes" => ["value" => $i, "!" => $job_settings->user_last_job_hour == $i ? "selected" : null]];                        $col[] = [                            "col" => ["1"],                            "content" => [                                "type" => "select",                                "control_class" => "settings_job_fields",                                "action" => "user_last_job_hour",                                "contidion" => "job_time_limit",                                "contidion_value" => "1",                                "datatype" => "direction",                                "options" => $hr,                                "attributes" => [                                    "class" => "form-control",                                ]                            ]                        ];                        $mn = [];                        for ($i = 0; $i < 60; $i++)                            $mn[] = ["text" => fixPre($i), "attributes" => ["value" => $i, "!" => $job_settings->user_last_job_minute == $i ? "selected" : null]];                        $col[] = [                            "col" => ["1"],                            "content" => [                                "type" => "select",                                "control_class" => "settings_job_fields",                                "action" => "user_last_job_minute",                                "contidion" => "job_time_limit",                                "contidion_value" => "1",                                "datatype" => "direction",                                "options" => $mn,                                "attributes" => [                                    "class" => "form-control",                                ]                            ]                        ];                        $row[] = $col;                        $col = [];                        /*                         * ********************************************************************************* */                        $col[] = [                            "col" => ["3"],                            "content" => ["type" => "label", "text" => "Siparişlerin Hazırlanma Süresi Kullan", "attributes" => ["class" => "form-label"]]                        ];                        $col[] = [                            "col" => ["2"],                            "content" => [                                "type" => "select",                                "control_class" => "settings_job_fields",                                "action" => "job_prepare_workable",                                "datatype" => "job_prepare_workable",                                "options" => [                                    [                                        "text" => "Çalışma Şeklini Seçiniz",                                        "attributes" => [                                            "value" => "---",                                        ]                                    ],                                    [                                        "text" => "Ürüne Göre Düzenle",                                        "attributes" => [                                            "value" => "changeable",                                            "!" => "disabled",                                        ]                                    ],                                    [                                        "text" => "Genel Olarak Düzenle",                                        "attributes" => ["value" => "general", "!" => "selected",]                                    ]                                ],                                "attributes" => [                                    "class" => "form-control",                                ]                            ]                        ];                        $col[] = [                            "col" => ["2"],                            "content" =>                            [                                "type" => "input",                                "control_class" => "settings_job_fields",                                "action" => "prepare_time",                                "contidion" => "job_prepare_workable",                                "contidion_value" => "general",                                "attributes" => [                                    "class" => "form-control",                                    "type" => "text",                                    "data-component_name" => "job_settings_form",                                    "value" => $job_settings->prepare_time ? $job_settings->prepare_time : 30,                                    "placeholder" => "siparişin hazırlanma süresi",                                    "data-type" => "prepare_time",                                ],                            ]                        ];                        $col[] = [                            "col" => ["2"],                            "content" => [                                "type" => "select",                                "control_class" => "settings_job_fields",                                "action" => "prepare_time_type",                                "contidion" => "job_prepare_workable",                                "contidion_value" => "general",                                "datatype" => "direction",                                "options" => [                                    [                                        "text" => "Dakika", "attributes" => ["value" => "minute", "!" => $job_settings->prepare_time_type == "minute" ? "selected" : null],                                    ],                                    [                                        "text" => "Saat", "attributes" => ["value" => "hour", "!" => $job_settings->prepare_time_type == "hour" ? "selected" : null],                                    ],                                    [                                        "text" => "Gün", "attributes" => ["value" => "day", "!" => $job_settings->prepare_time_type == "day" ? "selected" : null],                                    ],                                    [                                        "text" => "Ay", "attributes" => ["value" => "month", "!" => $job_settings->prepare_time_type == "month" ? "selected" : null],                                    ],                                    [                                        "text" => "Yıl", "attributes" => ["value" => "year", "!" => $job_settings->prepare_time_type == "year" ? "selected" : null],                                    ],                                ],                                "attributes" => [                                    "class" => "form-control",                                ]                            ]                        ];                        $row[] = $col;                        $col = [];                        /*                         * ********************************************************************************* */                        $col[] = [                            "col" => ["3"],                            "content" => ["type" => "label", "text" => "Teslimat Saatini Kullanıcı Seçsin", "attributes" => ["class" => "form-label"]]                        ];                        $col[] = [                            "col" => ["4"],                            "content" =>                            [                                "type" => "checkbox",                                "control_class" => "settings_job_fields",                                "action" => "delivery_time_select_byuser",                                "check" => [                                    "text" => "Teslimat Saatini Kullanıcı Seçsin",                                    "attributes" => [                                        "class" => "md-check",                                        "value" => "1",                                        "data-type" => "delivery_time_select_byuser",                                        "!" => $job_settings->delivery_time_select_byuser == 1 ? "checked" : null                                    ],                                ],                                "attributes" => [                                    "class" => "mt-checkbox-list",                                ],                            ]                        ];                        $row[] = $col;                        $col = [];                        /*                         * ********************************************************************************* */                        $col[] = [                            "col" => ["3"],                            "content" => ["type" => "label", "text" => "Siparişleri Gönderim adresine göre sınırla", "attributes" => ["class" => "form-label"]]                        ];                        $col[] = [                            "col" => ["4"],                            "content" =>                            [                                "type" => "checkbox",                                "control_class" => "settings_job_fields",                                "action" => "job_limit_delivery_location",                                "check" => [                                    "text" => "Gönderim Adresine Göre Sınırla",                                    "attributes" => [                                        "class" => "md-check",                                        "value" => "1",                                        "data-type" => "job_limit_delivery_location",                                        "!" => $job_settings->job_limit_delivery_location == 1 ? "checked" : null                                    ],                                ],                                "attributes" => [                                    "class" => "mt-checkbox-list",                                ],                            ]                        ];                        $row[] = $col;                        $col = [];                        /*                         * ********************************************************************************* */                        $col = [];                        $col[] = [                            "col" => ["12"],                            "content" =>                            [                                "type" => "component",                                "component_name" => "product_settings_extra_price",                                "content" => component::get_props("product_settings_extra_price_component"),                            ]                        ];                        $row[] = $col;                        $template[] = $row;                        echo '<input type="hidden" data-job_settings_form data-json="' . base64_encode(json_encode($template)) . '"/>';                        ?>                    </div>                    <div class="form-actions">                        <div class="row">                            <div class="col-md-offset-3 col-md-9">                                <button type="submit" class="btn green" name="settings" value="1">Kaydet</button>                            </div>                        </div>                    </div>                </form>            </div>        </div>    </div></div><?php component::end(); ?>