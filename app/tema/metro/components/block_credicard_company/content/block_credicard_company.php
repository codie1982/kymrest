<?php component::start(); ?><?php $customer_credi_card_data = component::get_props("customer_credi_card_data"); ?><?php //dnd($customer_credi_card_data);                          ?><?php date_default_timezone_set('europe/istanbul');                        ?><div data-section="credicard">    <div class="form-group">        <div class="row margin-bottom-10">            <div class="col-sm-3">                <button type="none" class="btn btn-circle red btn-outline" data-credicard="add">Kredi Kartı Ekle</button>            </div>        </div>        <div class="credicard_content">            <?php            $template = [];            if (!empty($customer_credi_card_data)) {                foreach ($customer_credi_card_data as $data) {                    $prk = $data->primary_key;                    $row = [];                                        $col[] = [                        "content" => [                            "type" => "primary_key",                            "control_class" => "customer_credicard_fields",                            "primary_id" => $data->$prk,                        ]                    ];                    $col[] = [                        "content" => [                            "type" => "secret_number",                            "control_class" => "customer_credicard_fields",                        ]                    ];  //secret_number                    $col[] = [                        "col" => ["3"],                        "content" =>                        [                            "type" => "label",                            "text" => "Kredi Kartı Sahibi",                            "attributes" => ["class" => "form-label"],                        ]                    ];  // Kredi Kartı Sahibi - label                    $col[] = [                        "col" => ["3"],                        "content" =>                        [                            "type" => "input",                            "control_class" => "customer_credicard_fields",                            "action" => "credicard_title",                            "attributes" => [                                "class" => "form-control",                                "type" => "text",                                "data-component_name" => "block_credicard_company",                                "value" => $data->credicard_title,                                "placeholder" => "Kredi Kartı Sahibinin isim ve soyisimi",                                "data-type" => "credicard_title",                            ],                        ]                    ]; // Kredi Karı Sahibi İsim Soyisim                     $col[] = [                        "col" => ["1"],                        "content" => [                            "type" => "removeButton",                        ]                    ]; // Kaldır Butonu                     $row[] = $col;                    $col = [];                    /* Birinci Satır * ********************************************************************************* */                    $col[] = [                        "col" => ["3"],                        "content" =>                        [                            "type" => "label",                            "text" => "Kredi Kartı Numarası",                            "attributes" => ["class" => "form-label"],                        ]                    ];  // Kredi Kartı Sahibi - label                    for ($i = 1; $i < 13; $i++)                        $mn[] = ["text" => fixPre($i), "attributes" => ["value" => $i, "!" => $data->month == 1 ? "selected" : null]];                    $col[] = [                        "col" => ["2"],                        "content" => [                            "type" => "select",                            "control_class" => "customer_credicard_fields",                            "action" => "month",                            "datatype" => "month",                            "options" => $mn,                            "attributes" => [                                "class" => "form-control",                            ]                        ]                    ]; // Ay                     for ($i = 0; $i < 20; $i++)                        $yr[] = ["text" => date("Y", strtotime("now")) + $i, "attributes" => ["value" => date("Y", strtotime("now")) + $i, "!" => $data->year == 1 ? "selected" : null]];                    $col[] = [                        "col" => ["2"],                        "content" => [                            "type" => "select",                            "control_class" => "customer_credicard_fields",                            "action" => "year",                            "datatype" => "year",                            "options" => $yr,                            "attributes" => [                                "class" => "form-control",                            ]                        ]                    ]; // Yıl                     $col[] = [                        "col" => ["3"],                        "content" =>                        [                            "type" => "input",                            "control_class" => "customer_credicard_fields",                            "action" => "credi_card_number",                            "attributes" => [                                "class" => "form-control",                                "type" => "text",                                "data-component_name" => "block_credicard_company",                                "value" => $data->year,                                "placeholder" => "Kredi Kartı Numarası",                                "data-type" => "credi_card_number",                            ],                        ]                    ]; // Kart Numarası                     $col[] = [                        "col" => ["2"],                        "content" =>                        [                            "type" => "input",                            "control_class" => "customer_credicard_fields",                            "action" => "card_security_number",                            "attributes" => [                                "class" => "form-control",                                "type" => "text",                                "data-component_name" => "block_credicard_company",                                "value" => $data->card_security_number,                                "placeholder" => "Güvenlik Numarası",                                "data-type" => "card_security_number",                            ],                        ]                    ]; // Güvenlik Numarası                     $row[] = $col;                    $template[] = $row;                    echo '<input type="hidden" data-block_credicard_company data-json="' . base64_encode(json_encode($template)) . '"/>';                }            }            $row = [];            $col = [];            $resettemplate = [];            $col[] = [                "content" => [                    "type" => "secret_number",                    "control_class" => "customer_credicard_fields",                ]            ];  //secret_number            $col[] = [                "col" => ["3"],                "content" =>                [                    "type" => "label",                    "text" => "Kredi Kartı Sahibi",                    "attributes" => ["class" => "form-label"],                ]            ];  // Kredi Kartı Sahibi - label            $col[] = [                "col" => ["3"],                "content" =>                [                    "type" => "input",                    "control_class" => "customer_credicard_fields",                    "action" => "credicard_title",                    "attributes" => [                        "class" => "form-control",                        "type" => "text",                        "data-component_name" => "block_credicard_company",                        "value" => "",                        "placeholder" => "Kredi Kartı Sahibinin isim ve soyisimi",                        "data-type" => "credicard_title",                    ],                ]            ]; // Kredi Karı Sahibi İsim Soyisim             $col[] = [                "col" => ["1"],                "content" => [                    "type" => "removeButton",                ]            ]; // Kaldır Butonu             $row[] = $col;            $col = [];            /* Birinci Satır * ********************************************************************************* */            $col[] = [                "col" => ["3"],                "content" =>                [                    "type" => "label",                    "text" => "Kredi Kartı Numarası",                    "attributes" => ["class" => "form-label"],                ]            ];  // Kredi Kartı Sahibi - label            for ($i = 1; $i < 13; $i++)                $mn[] = ["text" => fixPre($i), "attributes" => ["value" => $i]];            $col[] = [                "col" => ["2"],                "content" => [                    "type" => "select",                    "control_class" => "customer_credicard_fields",                    "action" => "month",                    "datatype" => "month",                    "options" => $mn,                    "attributes" => [                        "class" => "form-control",                    ]                ]            ]; // Ay             for ($i = 0; $i < 20; $i++)                $yr[] = ["text" => date("Y", strtotime("now")) + $i, "attributes" => ["value" => date("y", strtotime("now")) + $i]];            $col[] = [                "col" => ["2"],                "content" => [                    "type" => "select",                    "control_class" => "customer_credicard_fields",                    "action" => "year",                    "datatype" => "year",                    "options" => $yr,                    "attributes" => [                        "class" => "form-control",                    ]                ]            ]; // Yıl             $col[] = [                "col" => ["3"],                "content" =>                [                    "type" => "input",                    "control_class" => "customer_credicard_fields",                    "action" => "credi_card_number",                    "attributes" => [                        "class" => "form-control",                        "type" => "text",                        "data-component_name" => "block_credicard_company",                        "value" => "",                        "placeholder" => "Kredi Kartı Numarası",                        "data-type" => "credi_card_number",                    ],                ]            ]; // Kart Numarası             $col[] = [                "col" => ["2"],                "content" =>                [                    "type" => "input",                    "control_class" => "customer_credicard_fields",                    "action" => "card_security_number",                    "attributes" => [                        "class" => "form-control",                        "type" => "text",                        "data-component_name" => "block_credicard_company",                        "value" => "",                        "placeholder" => "Güvenlik Numarası",                        "data-type" => "card_security_number",                    ],                ]            ]; // Güvenlik Numarası             $row[] = $col;            $resettemplate[] = $row;            echo '<input type="hidden" reset-block_credicard_company data-json="' . base64_encode(json_encode($resettemplate)) . '"/>';            ?>        </div>    </div></div><?php component::end(); ?>